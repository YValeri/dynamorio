<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PADLOC: api/samples/padloc/utils.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PADLOC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0188a3e6da905bc60aceb35bf790b8c9.html">api</a></li><li class="navelem"><a class="el" href="dir_e789fae5d8d5929b9d3e936f37779460.html">samples</a></li><li class="navelem"><a class="el" href="dir_87b899a77f2d71d2d94118ce958d6209.html">padloc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">utils.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Library Manipulation API Sample, part of the Padloc project. <a class="el" href="utils_8cpp.html" title="Library Manipulation API Sample, part of the Padloc project. utils.cpp. ">utils.cpp</a>.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac24b3dfc00871ec0f893b13007dcb6ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8cpp.html#ac24b3dfc00871ec0f893b13007dcb6ac">set_log_level</a> (int level)</td></tr>
<tr class="memdesc:ac24b3dfc00871ec0f893b13007dcb6ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setter for the log level.  <a href="#ac24b3dfc00871ec0f893b13007dcb6ac">More...</a><br /></td></tr>
<tr class="separator:ac24b3dfc00871ec0f893b13007dcb6ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7043e0770fe19ffbf292c4b06f3190a4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8cpp.html#a7043e0770fe19ffbf292c4b06f3190a4">get_log_level</a> ()</td></tr>
<tr class="memdesc:a7043e0770fe19ffbf292c4b06f3190a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for the log level.  <a href="#a7043e0770fe19ffbf292c4b06f3190a4">More...</a><br /></td></tr>
<tr class="separator:a7043e0770fe19ffbf292c4b06f3190a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a835f3d6b4696d3bcf7bf77d5d5011310"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8cpp.html#a835f3d6b4696d3bcf7bf77d5d5011310">set_symbol_mode</a> (padloc_symbol_mode_t mode)</td></tr>
<tr class="memdesc:a835f3d6b4696d3bcf7bf77d5d5011310"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setter for the client mode.  <a href="#a835f3d6b4696d3bcf7bf77d5d5011310">More...</a><br /></td></tr>
<tr class="separator:a835f3d6b4696d3bcf7bf77d5d5011310"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50beac1a9b001320cbb996be02a4376b"><td class="memItemLeft" align="right" valign="top">padloc_symbol_mode_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8cpp.html#a50beac1a9b001320cbb996be02a4376b">get_symbol_mode</a> ()</td></tr>
<tr class="memdesc:a50beac1a9b001320cbb996be02a4376b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for the client mode.  <a href="#a50beac1a9b001320cbb996be02a4376b">More...</a><br /></td></tr>
<tr class="separator:a50beac1a9b001320cbb996be02a4376b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33ed9ff6fc5a386665c2bcabfae2cd80"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8cpp.html#a33ed9ff6fc5a386665c2bcabfae2cd80">set_analyse_mode</a> (padloc_analyse_mode_t mode)</td></tr>
<tr class="memdesc:a33ed9ff6fc5a386665c2bcabfae2cd80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setter for the backend analysis mode.  <a href="#a33ed9ff6fc5a386665c2bcabfae2cd80">More...</a><br /></td></tr>
<tr class="separator:a33ed9ff6fc5a386665c2bcabfae2cd80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cf8c365f37832335b33aadae1113278"><td class="memItemLeft" align="right" valign="top">padloc_analyse_mode_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8cpp.html#a5cf8c365f37832335b33aadae1113278">get_analyse_mode</a> ()</td></tr>
<tr class="memdesc:a5cf8c365f37832335b33aadae1113278"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for the backend analysis mode.  <a href="#a5cf8c365f37832335b33aadae1113278">More...</a><br /></td></tr>
<tr class="separator:a5cf8c365f37832335b33aadae1113278"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a853216ac51aa181669ff4d3de74058a7"><td class="memItemLeft" align="right" valign="top"><a id="a853216ac51aa181669ff4d3de74058a7"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8cpp.html#a853216ac51aa181669ff4d3de74058a7">print_help</a> ()</td></tr>
<tr class="memdesc:a853216ac51aa181669ff4d3de74058a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function for printing the help string, when a command line related bug occurs, or the user uses "-h" or "--help". <br /></td></tr>
<tr class="separator:a853216ac51aa181669ff4d3de74058a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a799f4a993055e5335a474362716c71b3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8cpp.html#a799f4a993055e5335a474362716c71b3">write_to_file_symbol_file_header</a> (std::ofstream &amp;output)</td></tr>
<tr class="memdesc:a799f4a993055e5335a474362716c71b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes to an output file the symbol file header, needed for the symbol analysis part of the program.  <a href="#a799f4a993055e5335a474362716c71b3">More...</a><br /></td></tr>
<tr class="separator:a799f4a993055e5335a474362716c71b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f902443c9bb17fc1c645753bc649f33"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8cpp.html#a0f902443c9bb17fc1c645753bc649f33">inc_error</a> ()</td></tr>
<tr class="memdesc:a0f902443c9bb17fc1c645753bc649f33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Incrementer for the error count.  <a href="#a0f902443c9bb17fc1c645753bc649f33">More...</a><br /></td></tr>
<tr class="separator:a0f902443c9bb17fc1c645753bc649f33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53d02df1713071578c4b6a030269739b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8cpp.html#a53d02df1713071578c4b6a030269739b">is_number</a> (const std::string &amp;s)</td></tr>
<tr class="memdesc:a53d02df1713071578c4b6a030269739b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to that check if a string is a number.  <a href="#a53d02df1713071578c4b6a030269739b">More...</a><br /></td></tr>
<tr class="separator:a53d02df1713071578c4b6a030269739b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65adbfbbc4fb5be2af72e69316c4698f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8cpp.html#a65adbfbbc4fb5be2af72e69316c4698f">arguments_parser</a> (int argc, const char *argv[])</td></tr>
<tr class="memdesc:a65adbfbbc4fb5be2af72e69316c4698f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main parsing function.  <a href="#a65adbfbbc4fb5be2af72e69316c4698f">More...</a><br /></td></tr>
<tr class="separator:a65adbfbbc4fb5be2af72e69316c4698f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Library Manipulation API Sample, part of the Padloc project. <a class="el" href="utils_8cpp.html" title="Library Manipulation API Sample, part of the Padloc project. utils.cpp. ">utils.cpp</a>. </p>
<p>This file gathers utilitary functions used throughout the program, the main parsing function and the log level parts.</p>
<p>This file contains the main command line parsing function, and calls the parser of plugins (currently 2 : symbol analysis and backend analysis) and the utilitary one.</p>
<dl class="section author"><dt>Author</dt><dd>Brasseur Dylan, Teaudors Mickaël, Valeri Yoann </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2019 </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Interflop </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a65adbfbbc4fb5be2af72e69316c4698f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65adbfbbc4fb5be2af72e69316c4698f">&#9670;&nbsp;</a></span>arguments_parser()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool arguments_parser </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main parsing function. </p>
<p>Get each argument of the command line, and calls all the parsers of the other plugins (currently backend analysis and symbol analysis) and utilitary. The called functions are functions of the form : bool name(std::string arg, int <em>i, int argc, char</em> argv[]). The second parameter is given as pointer so that the parsing functions can modify it if they see fit, for instance when they detect an option that needs another argument.</p>
<p>The arguments that we detect are the ones given by DynamoRIO, meaning it is not the actual command line, but the options listed after the "-c library" up until the "-- application". Generally, the command line for DynamoRIO with drrun will look like this : "drrun DynamoRIO_option -c client client_options -- app app_options" So what we check in this function is the client_options part.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>The number of arguments </td></tr>
    <tr><td class="paramname">argv</td><td>The arguments of the command line</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the execution of the program must stop, else false </dd></dl>
<p>We first call the utilitary parser, then the symbol parser and finally, the backend analysis parser. If all the parser return false, and error_count is equal to UNKNOWN_ARGUMENT, the command line option is unknown, so print an error and return true.</p>
<p>When all the command line options have been checked, we call the manager of each other part of the code, and they will do what's necessary according to the state of the program.</p>

</div>
</div>
<a id="a5cf8c365f37832335b33aadae1113278"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cf8c365f37832335b33aadae1113278">&#9670;&nbsp;</a></span>get_analyse_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">padloc_analyse_mode_t get_analyse_mode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Getter for the backend analysis mode. </p>
<dl class="section return"><dt>Returns</dt><dd>THe current backend analysis mode </dd></dl>

</div>
</div>
<a id="a7043e0770fe19ffbf292c4b06f3190a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7043e0770fe19ffbf292c4b06f3190a4">&#9670;&nbsp;</a></span>get_log_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_log_level </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Getter for the log level. </p>
<dl class="section return"><dt>Returns</dt><dd>The current log level </dd></dl>

</div>
</div>
<a id="a50beac1a9b001320cbb996be02a4376b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50beac1a9b001320cbb996be02a4376b">&#9670;&nbsp;</a></span>get_symbol_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">padloc_symbol_mode_t get_symbol_mode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Getter for the client mode. </p>
<dl class="section return"><dt>Returns</dt><dd>The current client mode </dd></dl>

</div>
</div>
<a id="a0f902443c9bb17fc1c645753bc649f33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f902443c9bb17fc1c645753bc649f33">&#9670;&nbsp;</a></span>inc_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inc_error </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Incrementer for the error count. </p>
<p>When a parser function doesn't recognize an option, it calls this function to increment the error count. That way, when all the parser have been called and none recognizes the option, the error count is equal to the number of parsers, and an error is triggered. </p>

</div>
</div>
<a id="a53d02df1713071578c4b6a030269739b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53d02df1713071578c4b6a030269739b">&#9670;&nbsp;</a></span>is_number()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool is_number </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function to that check if a string is a number. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>The string to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the string represents a number </dd></dl>

</div>
</div>
<a id="a33ed9ff6fc5a386665c2bcabfae2cd80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33ed9ff6fc5a386665c2bcabfae2cd80">&#9670;&nbsp;</a></span>set_analyse_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_analyse_mode </td>
          <td>(</td>
          <td class="paramtype">padloc_analyse_mode_t&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setter for the backend analysis mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mode</td><td>The new backend analysis mode </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac24b3dfc00871ec0f893b13007dcb6ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac24b3dfc00871ec0f893b13007dcb6ac">&#9670;&nbsp;</a></span>set_log_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_log_level </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setter for the log level. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>The new log level </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a835f3d6b4696d3bcf7bf77d5d5011310"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a835f3d6b4696d3bcf7bf77d5d5011310">&#9670;&nbsp;</a></span>set_symbol_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_symbol_mode </td>
          <td>(</td>
          <td class="paramtype">padloc_symbol_mode_t&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setter for the client mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mode</td><td>The new client mode </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a799f4a993055e5335a474362716c71b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a799f4a993055e5335a474362716c71b3">&#9670;&nbsp;</a></span>write_to_file_symbol_file_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void write_to_file_symbol_file_header </td>
          <td>(</td>
          <td class="paramtype">std::ofstream &amp;&#160;</td>
          <td class="paramname"><em>output</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes to an output file the symbol file header, needed for the symbol analysis part of the program. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">output</td><td>The output file in which to write </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
